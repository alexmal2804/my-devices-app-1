# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Supabase

## –ü—Ä–æ–±–ª–µ–º–∞

```
PGRST100: "failed to parse select parameter (count(*))"
```

## –ü—Ä–∏—á–∏–Ω–∞

–í Supabase –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `select('count(*)')` - —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è PostgreSQL REST API.

## –†–µ—à–µ–Ω–∏–µ

–ó–∞–º–µ–Ω–∏–ª–∏:

```typescript
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
.select('count(*)')

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
.select('*', { count: 'exact', head: true })
```

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ supabaseClient.ts

### –°—Ç—Ä–æ–∫–∞ 115-117:

```typescript
const { count: checkCount, error: checkError } = await supabase
  .from('document_chunks')
  .select('*', { count: 'exact', head: true })
  .not('embedding', 'is', null)
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```typescript
console.log('üìä Supabase: –ß–∞–Ω–∫–æ–≤ —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ –≤ –±–∞–∑–µ:', checkCount || 0)
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–¥—Å—á–µ—Ç–∞ –≤ Supabase

1. **–¢–æ—á–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç** (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ —Ç–æ—á–Ω–æ):

   ```typescript
   .select('*', { count: 'exact', head: true })
   ```

2. **–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç** (–±—ã—Å—Ç—Ä–µ–µ):

   ```typescript
   .select('*', { count: 'estimated', head: true })
   ```

3. **–ü–æ–¥—Å—á–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏**:
   ```typescript
   .select('*', { count: 'exact' })
   ```

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

–¢–µ–ø–µ—Ä—å:

- ‚úÖ –û—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç —á–∞–Ω–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ RAG —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–ª–∞
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–∞ `test-manual.txt`
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–∞—Ö AI
